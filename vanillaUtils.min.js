!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.vanillaUtils=e()}("undefined"!=typeof self?self:this,function(){"use strict";function t(t,e={}){const r=document.createElement(t);for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.setAttribute(t,e[t]);return r}function e(t){const e={"89504E47":"image/png",47494638:"image/gif",FFD8FF:"image/jpeg","49492A00":"image/tiff","4D4D002A":"image/tiff","424D":"image/bmp",52494646:"image/webp",25504446:"application/pdf","504B0304":"application/zip","504B34":"application/vnd.openxmlformats-officedocument",D0CF11E0:"application/msword","377ABCAF271C":"application/7z","1F8B08":"application/gzip","526172211A07":"application/x-rar-compressed",7573746172:"application/x-tar","000000":"video/mp4","1A45DFA3":"video/webm",52494646:"video/avi","6674797069736F6D":"video/mp4",494433:"audio/mpeg",FFFB:"audio/mpeg",FFF3:"audio/mpeg",FFF2:"audio/mpeg",52494646:"audio/wav","664C6143":"audio/flac","4F676753":"audio/ogg"},r=(n=t,Array.from(n).map(t=>t.toString(16).padStart(2,"0").toUpperCase()).join(""));var n;for(const[t,n]of Object.entries(e))if(r.startsWith(t))return n;return"application/octet-stream"}function r(t){return t.reduce((t,e)=>t+e,0)}function n(t){return Math.max(...t)}function o(t){return Math.min(...t)}function i(t,e){const r={};return t.forEach(t=>{const n=e(t),o=r[n];o?o.push(t):r[n]=[t]}),r}function a(t){return new Promise(e=>setTimeout(e,t))}return Array.prototype.sum||(Array.prototype.sum=function(){return r(this)}),Array.prototype.max||(Array.prototype.max=function(){return n(this)}),Array.prototype.min||(Array.prototype.min=function(){return o(this)}),Array.prototype.groupBy||(Array.prototype.groupBy=function(t){return i(this,t)}),{createElement:t,openLink:function(e,r=!1){const n=t("a",{href:e,target:r?"_blank":"_self"});n.click(),n.remove()},downloadLink:function(e){const r=t("a",{href:e,download:e.split("/").pop()});r.click(),r.remove()},ready:function(t){"loading"!==document.readyState?t():document.addEventListener("DOMContentLoaded",t)},getQueryParams:function(t){const e=t??("undefined"!=typeof window?window.location.search:""),r={},n=new URLSearchParams(e);for(const[t,e]of n)r[t]=e;return r},buildQueryString:function(t){const e=new URLSearchParams;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.append(r,t[r]);return e.toString()},guessMimeType:e,downloadFileFromBytes:function(r,n,o){const i=new Blob([r],{type:o??e(r)}),a=window.URL.createObjectURL(i),c=t("a",{href:a,download:n});c.click(),c.remove(),window.URL.revokeObjectURL(a)},fetchRequest:function(t,e={}){if(null==t)return Promise.reject("Improper request. Needs a url.");const r={...e};r.method=r.method??"GET";const n=e.responseType??"auto";return fetch(t,r).then(t=>{if(!t.ok)throw t;if("auto"===n){const e=t.headers.get("content-type")||"";return e.includes("application/json")?t.json():e.includes("text/")?t.text():e.includes("image/")||e.includes("application/octet-stream")?t.blob():t.text()}return"json"===n?t.json():"text"===n?t.text():"blob"===n?t.blob():"arrayBuffer"===n?t.arrayBuffer():void 0})},setCookie:function(t,e,r={}){let n=`${t}=${e}`;if(null!=r.expires){const t=new Date;t.setTime(t.getTime()+24*r.expires*60*60*1e3),n+=`;expires=${t.toGMTString()}`}null!=r.path&&(n+=`;path=${r.path}`),null!=r.samesite&&(n+=`;samesite=${r.samesite}`),0!=r.secure&&(n+=";secure"),document.cookie=n},getCookie:function(t){const e=decodeURIComponent(document.cookie).split(";").map(t=>t.trim()).find(e=>0==e.indexOf(t+"="));return e?e.slice(t.length+1):""},removeCookie:function(t){document.cookie=`${t}=;expires=${(new Date).toGMTString()};path=/`},toPromise:function(t,e){return new Promise((r,n)=>{r(t(...e))})},debounce:function(t,e,r={}){let n;return function(...o){const i=r.immediate&&!n;n&&clearTimeout(n),n=setTimeout(()=>{n=void 0,r.immediate||t(...o)},e),i&&t(...o)}},throttle:function(t,e,r={}){let n,o=0;const i=!1!==r.leading,a=!1!==r.trailing;return function(...r){const c=Date.now(),u=c-o;o||i||(o=c),u>=e?(n&&(clearTimeout(n),n=void 0),o=c,t(...r)):!n&&a&&(n=setTimeout(()=>{o=i?Date.now():0,n=void 0,t(...r)},e-u))}},sleep:a,retry:async function(t,e={}){const r=e.attempts??3,n=e.delay??1e3;for(let e=0;e<r;e++)try{return await t()}catch(t){if(e===r-1)throw t;await a(n)}},timeout:function(t,e){return Promise.race([t,new Promise((t,r)=>setTimeout(()=>r(new Error("Promise timed out")),e))])},capitalize:function(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""},truncate:function(t,e){return!t||t.length<=e?t:t.slice(0,e)+"..."},slugify:function(t){return t?t.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-"):""},camelCase:function(t){return t?t.toString().toLowerCase().trim().replace(/[\s_-]+(.)?/g,(t,e)=>e?e.toUpperCase():""):""},snakeCase:function(t){return t?t.toString().trim().replace(/([A-Z])/g,"_$1").replace(/[\s-]+/g,"_").replace(/^_+/,"").replace(/_+/g,"_").toLowerCase():""},kebabCase:function(t){return t?t.toString().trim().replace(/([A-Z])/g,"-$1").replace(/[\s_]+/g,"-").replace(/^-+/,"").replace(/-+/g,"-").toLowerCase():""},escapeHtml:function(t){if(!t)return"";const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return t.toString().replace(/[&<>"'\/]/g,t=>e[t])},unescapeHtml:function(t){if(!t)return"";const e={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'","&#x2F;":"/"};return t.toString().replace(/&(?:amp|lt|gt|quot|#x27|#x2F);/g,t=>e[t])},stripHtml:function(t){return t?t.toString().replace(/<[^>]*>/g,""):""},pad:function(t,e,r=" ",n="right"){if(t||(t=""),(t=t.toString()).length>=e)return t;const o=e-t.length,i=r.toString().charAt(0);if("left"===n)return i.repeat(o)+t;if("both"===n){const e=Math.floor(o/2),r=o-e;return i.repeat(e)+t+i.repeat(r)}return t+i.repeat(o)},clamp:function(t,e,r){return Math.min(Math.max(t,e),r)},formatCurrency:function(t,e="USD",r="en-US"){return new Intl.NumberFormat(r,{style:"currency",currency:e}).format(t)},randomInt:function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t},round:function(t,e){const r=Math.pow(10,e);return Math.round(t*r)/r},formatNumber:function(t,e="en-US"){return new Intl.NumberFormat(e).format(t)},isValidEmail:function(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(t).toLowerCase())},isValidUrl:function(t){try{return new URL(t),!0}catch(t){return!1}},sum:r,max:n,min:o,groupBy:i,unique:function(t){return[...new Set(t)]},uniqueBy:function(t,e){const r=new Set;return t.filter(t=>{const n=e(t);return!r.has(n)&&(r.add(n),!0)})},chunk:function(t,e){const r=[];for(let n=0;n<t.length;n+=e)r.push(t.slice(n,n+e));return r},flatten:function t(e,r=1){return 0===r?e.slice():e.reduce((e,n)=>e.concat(Array.isArray(n)?t(n,r-1):n),[])},flattenDeep:function t(e){return e.reduce((e,r)=>e.concat(Array.isArray(r)?t(r):r),[])},shuffle:function(t){const e=t.slice();for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e},partition:function(t,e){const r=[],n=[];return t.forEach(t=>{e(t)?r.push(t):n.push(t)}),[r,n]},deepClone:function t(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array)return e.map(e=>t(e));if(e instanceof Object){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=t(e[n]));return r}},pick:function(t,e){const r={};return e.forEach(e=>{Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e])}),r},omit:function(t,e){const r={...t};return e.forEach(t=>{delete r[t]}),r},deepMerge:function t(e,...r){if(!r.length)return e;const n=r.shift();if("object"==typeof e&&"object"==typeof n)for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&("object"!=typeof n[r]||null===n[r]||Array.isArray(n[r])?e[r]=n[r]:(e[r]||(e[r]={}),t(e[r],n[r])));return t(e,...r)},isEmpty:function(t){return null==t||("string"==typeof t||Array.isArray(t)?0===t.length:"object"==typeof t&&0===Object.keys(t).length)},setLocalStorage:function(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(t){console.error("Error setting localStorage:",t)}},getLocalStorage:function(t,e=null){try{const r=localStorage.getItem(t);return r?JSON.parse(r):e}catch(t){return console.error("Error getting localStorage:",t),e}},removeLocalStorage:function(t){try{localStorage.removeItem(t)}catch(t){console.error("Error removing localStorage:",t)}},setSessionStorage:function(t,e){try{sessionStorage.setItem(t,JSON.stringify(e))}catch(t){console.error("Error setting sessionStorage:",t)}},getSessionStorage:function(t,e=null){try{const r=sessionStorage.getItem(t);return r?JSON.parse(r):e}catch(t){return console.error("Error getting sessionStorage:",t),e}},removeSessionStorage:function(t){try{sessionStorage.removeItem(t)}catch(t){console.error("Error removing sessionStorage:",t)}}}});